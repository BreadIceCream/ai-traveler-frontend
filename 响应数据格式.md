# æ¥å£

## POIå…´è¶£ç‚¹ç®¡ç†

### è·å–POIè¯¦ç»†ä¿¡æ¯

**æ¥å£åœ°å€**:`/api/pois/{poiId}`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Pois

### è¯­ä¹‰æœç´¢POI

**æ¥å£åœ°å€**:`/api/pois/search/semantic`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰**ï¼šList\<Pois>

### ç¬¬ä¸‰æ–¹APIæœç´¢POIå¹¶ä¿å­˜

**æ¥å£åœ°å€**:`/api/pois/search/exact/api`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰**ï¼šList\<Pois>

### æ•°æ®åº“æœç´¢POI

**æ¥å£åœ°å€**:`/api/pois/search/exact/db`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰**ï¼šList\<Pois>

## ç”¨æˆ·ç®¡ç†

### ç”¨æˆ·ç™»å½•

**æ¥å£åœ°å€**:`/api/users/login`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Stringï¼Œè¡¨ç¤ºç”¨æˆ·çš„JWT token

### è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

**æ¥å£åœ°å€**:`/api/users/me`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Users

### æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ç”¨æˆ·

**æ¥å£åœ°å€**:`/api/users/{userId}`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Users

### æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·

**æ¥å£åœ°å€**:`/api/users/username`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Users

### æ›´æ–°ç”¨æˆ·åå¥½è®¾ç½®

**æ¥å£åœ°å€**:`/api/users/preferences`

**è¯·æ±‚æ–¹å¼**:`PUT`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Users

### æŸ¥æ‰¾å…´è¶£ç›¸ä¼¼ç”¨æˆ·

**æ¥å£åœ°å€**:`/api/users/similar`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<Users>

## æ—…ç¨‹ç®¡ç†

### åˆ›å»ºæ—…ç¨‹

**æ¥å£åœ°å€**:`/api/trips/create`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Trips

### æ›´æ–°æ—…ç¨‹ä¿¡æ¯

**æ¥å£åœ°å€**:`/api/trips/update`

**è¯·æ±‚æ–¹å¼**:`PUT`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Trips

### è·å–ç”¨æˆ·æ‰€æœ‰æ—…ç¨‹

**æ¥å£åœ°å€**:`/api/trips/user`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<TripWithMemberInfoDto>

### åˆ†é¡µè·å–å…¬å¼€æ—…ç¨‹

**æ¥å£åœ°å€**:`/api/trips/public`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Page\<Trips>ï¼Œä½¿ç”¨MybatisPlusçš„åˆ†é¡µæ’ä»¶

### è·å–å®Œæ•´æ—…ç¨‹ä¿¡æ¯

**æ¥å£åœ°å€**:`/api/trips/detail`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**EntireTrip

### AIæ™ºèƒ½ç”Ÿæˆå®Œæ•´æ—…ç¨‹

**æ¥å£åœ°å€**:`/api/trips/ai-generate`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**EntireTrip

## æ—…ç¨‹æ—¥ç¨‹ç®¡ç†

### åˆ›å»ºæ—…ç¨‹æ—¥ç¨‹

**æ¥å£åœ°å€**:`/api/tripDays/create`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**TripDays

### è·å–æŸå¤©æ—¥ç¨‹è¯¦æƒ…

**æ¥å£åœ°å€**:`/api/tripDays/detail`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**EntireTripDay

### è·å–æ—…ç¨‹æ‰€æœ‰æ—¥ç¨‹

**æ¥å£åœ°å€**:`/api/tripDays/list`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<EntireTripDay>

### AIæ™ºèƒ½é‡æ–°è§„åˆ’æŸå¤©æ—…ç¨‹

**æ¥å£åœ°å€**:`/api/tripDays/aiReplan`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**EntireTripDay

## æ—¥ç¨‹Itemç®¡ç†

### è·å–æŸä¸ªæ—¥ç¨‹çš„è¯¦ç»†itemåˆ—è¡¨

**æ¥å£åœ°å€**:`/api/tripDayItems/list`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<EntireTripDayItem>

### æ·»åŠ æ—¥ç¨‹item

**æ¥å£åœ°å€**:`/api/tripDayItems/add`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**TripDayItems

### æ›´æ–°æ—¥ç¨‹itemä¿¡æ¯

**æ¥å£åœ°å€**:`/api/tripDayItems/update`

**è¯·æ±‚æ–¹å¼**:`PUT`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**TripDayItems

### AIæ›´æ–°æ—¥ç¨‹itemçš„äº¤é€šå»ºè®®

**æ¥å£åœ°å€**:`/api/tripDayItems/transport`

**è¯·æ±‚æ–¹å¼**:`PUT`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**TripDayItems

## æ”¯å‡ºç®¡ç†

### æ·»åŠ å•ç¬”æ”¯å‡º

**æ¥å£åœ°å€**:`/api/trip-expenses/add`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**TripExpenses

### æ›´æ–°æ”¯å‡ºè®°å½•

**æ¥å£åœ°å€**:`/api/trip-expenses/update`

**è¯·æ±‚æ–¹å¼**:`PUT`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**TripExpenses

### è·å–å•ç¬”æ”¯å‡ºè¯¦æƒ…

**æ¥å£åœ°å€**:`/api/trip-expenses/detail`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**TripExpenses

### è·å–æŒ‡å®šæ—…ç¨‹çš„æ”¯å‡ºè®°å½•

**æ¥å£åœ°å€**:`/api/trip-expenses/list`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<TripExpenses>

### è·å–æŒ‡å®šæ—…ç¨‹çš„æ€»æ”¯å‡ºç»Ÿè®¡ä¿¡æ¯

**æ¥å£åœ°å€**:`/api/trip-expenses/statistics/total`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**DoubleSummaryStatistics (JavaåŸç”Ÿç±»ï¼ŒåŒ…å«count, sum, min, average, max)

### è·å–æŒ‡å®šæ—…ç¨‹çš„å„ç±»æ”¯å‡ºç»Ÿè®¡ä¿¡æ¯

**æ¥å£åœ°å€**:`/api/trip-expenses/statistics/category`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Map\<ExpenseType, DoubleSummaryStatistics>

## æ—…ç¨‹æ—¥å¿—ç®¡ç†

### åˆ›å»ºæ—¥å¿—

**æ¥å£åœ°å€**:`/api/trip-logs/create`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®ç±»å‹ï¼ˆdataï¼‰**ï¼šStringï¼Œè¡¨ç¤ºåˆ›å»ºç»“æœä¿¡æ¯

### è·å–å½“å‰ç”¨æˆ·æŸä¸ªæ—…ç¨‹æ‰€æœ‰æ—¥å¿—

**æ¥å£åœ°å€**:`/api/trip-logs/trip`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<TripLogs>

### è·å–æ—…ç¨‹å…¬å¼€æ—¥å¿—

**æ¥å£åœ°å€**:`/api/trip-logs/trip/public`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<TripLogsDto>

## æ—…ç¨‹æˆå‘˜ç®¡ç†

### è·å–æ—…ç¨‹æˆå‘˜åˆ—è¡¨

**æ¥å£åœ°å€**:`/api/tripMembers/list`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<TripMemberDto>

### è·å–å¾…å¤„ç†çš„æˆå‘˜è¯·æ±‚æ•°é‡

**æ¥å£åœ°å€**:`/api/tripMembers/pending`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<TripMemberPendingRequestDto>

## éPOIé¡¹ç®¡ç†

### åˆ›å»ºéPOIé¡¹

**æ¥å£åœ°å€**:`/api/nonPoiItem/create`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**NonPoiItem

### åˆ†é¡µè·å–ç”¨æˆ·çš„éPOIé¡¹åˆ—è¡¨

**æ¥å£åœ°å€**:`/api/nonPoiItem/page`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Page\<NonPoiItem>ï¼Œä½¿ç”¨çš„æ˜¯MybatisPlusçš„åˆ†é¡µæ’ä»¶ã€‚

### æ›´æ–°éPOIé¡¹

**æ¥å£åœ°å€**:`/api/nonPoiItem/update`

**è¯·æ±‚æ–¹å¼**:`PUT`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**NonPoiItem

## å¿ƒæ„¿å•æœåŠ¡

### è·å–æŸä¸ªè¡Œç¨‹ä¸‹çš„å¿ƒæ„¿å•itemåˆ—è¡¨

**æ¥å£åœ°å€**:`/api/wishlistItems/list`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<EntireWishlistItem>

## AIæ¨èä¼šè¯ç®¡ç†

### åˆ›å»ºAIæ¨èä¼šè¯

**æ¥å£åœ°å€**:`/api/recommendation/conversation/create`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**AiRecommendationConversation

### é‡å‘½åAIæ¨èä¼šè¯

**æ¥å£åœ°å€**:`/api/recommendation/conversation/rename`

**è¯·æ±‚æ–¹å¼**:`PUT`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**AiRecommendationConversation

### è·å–æ‰€æœ‰AIæ¨èä¼šè¯

**æ¥å£åœ°å€**:`/api/recommendation/conversation/all`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<AiRecommendationConversation>

### è·å–AIæ¨èä¼šè¯

**æ¥å£åœ°å€**:`/api/recommendation/conversation/{conversationId}`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**AiRecommendationConversation

### è·å–AIæ¨èä¼šè¯å†å²

**æ¥å£åœ°å€**:`/api/recommendation/conversation/history/{conversationId}`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<Message>

### å¤„ç†ç”¨æˆ·å¯¹è¯

**æ¥å£åœ°å€**:`/api/recommendation/conversation/handle`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**AiRecommendResponse

### åˆ é™¤AIæ¨èä¼šè¯

**æ¥å£åœ°å€**:`/api/recommendation/conversation/delete`

**è¯·æ±‚æ–¹å¼**:`DELETE`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**Boolean

## AIæ¨èé¡¹ç®¡ç†

### è·å–ä¼šè¯æ¨èçš„pois

**æ¥å£åœ°å€**:`/api/recommendation/items/pois`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<Pois>

### è·å–ä¼šè¯æ¨èçš„nonPois

**æ¥å£åœ°å€**:`/api/recommendation/items/nonPois`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<NonPoiItem>

## ç½‘é¡µç®¡ç†

### è·å–ä¼šè¯ä¸‹çš„æ‰€æœ‰ç½‘é¡µ

**æ¥å£åœ°å€**:`/api/webPage/list`

**è¯·æ±‚æ–¹å¼**:`GET`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<WebPage>

### ä»ç½‘é¡µä¸­æå–ä¿¡æ¯

**æ¥å£åœ°å€**:`/api/webPage/extract`

**è¯·æ±‚æ–¹å¼**:`POST`

**å“åº”æ•°æ®æ ¼å¼ï¼ˆdataï¼‰ï¼š**List\<ExtractResult>


# Model

## Pois

```java
public class Pois extends ItineraryItem implements Serializable {

    @Schema(description = "POI ID")
    private UUID poiId;

    @Schema(description = "å¤–éƒ¨API ID", example = "B0FFH4XYZ")
    private String externalApiId;

    @Schema(description = "åç§°", example = "æ•…å®«åšç‰©é™¢")
    private String name;

    @Schema(description = "ç±»å‹", example = "museum")
    private String type;

    @Schema(description = "åŸå¸‚", example = "åŒ—äº¬")
    private String city;

    @Schema(description = "åœ°å€", example = "åŒ—äº¬å¸‚ä¸œåŸåŒºæ™¯å±±å‰è¡—4å·")
    private String address;

    @Schema(description = "çº¬åº¦", example = "39.9163")
    private BigDecimal latitude;

    @Schema(description = "ç»åº¦", example = "116.3972")
    private BigDecimal longitude;

    @Schema(description = "æè¿°", example = "æ˜æ¸…ä¸¤æœçš„çš‡å®«ï¼Œç°ä¸ºæ•…å®«åšç‰©é™¢")
    private String description;

    @Schema(description = "å¼€æ”¾æ—¶é—´", example = "08:30-17:00")
    private String openingHours;

    @Schema(description = "å¹³å‡æ¸¸è§ˆæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰", example = "180")
    private Integer avgVisitDuration;
    
    @Schema(description = "å¹³å‡èŠ±è´¹", example = "60å…ƒ")
    private String avgCost;

    @Schema(description = "ç…§ç‰‡URLåˆ—è¡¨")
    private List<String> photos;

    @Schema(description = "ç”µè¯", example = "010-85007421")
    private String phone;

    @Schema(description = "è¯„åˆ†", example = "4.8")
    private String rating;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;

}
```

## Users

```java
public class Users implements Serializable {
    @Schema(description = "ç”¨æˆ·ID")
    private UUID userId;

    @Schema(description = "ç”¨æˆ·å", example = "testuser")
    private String username;
    
    @Schema(description = "å¯†ç ", example = "123456")
    private String password;

    @Schema(description = "åå¥½æ–‡æœ¬", example = "å–œæ¬¢å†å²æ–‡åŒ–å’Œç¾é£Ÿ")
    private String preferencesText;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;
}
```

## Trips

```java
public class Trips implements Serializable {
    @Schema(description = "æ—…ç¨‹ID")
    private UUID tripId;

    @Schema(description = "åˆ›å»ºè€…ID")
    private UUID userId;

    @Schema(description = "æ ‡é¢˜", example = "åŒ—äº¬ä¸‰æ—¥æ¸¸")
    private String title;

    @Schema(description = "ç›®çš„åœ°åŸå¸‚", example = "åŒ—äº¬")
    private String destinationCity;

    @Schema(description = "å¼€å§‹æ—¥æœŸ", example = "2024-12-01")
    private LocalDate startDate;

    @Schema(description = "ç»“æŸæ—¥æœŸ", example = "2024-12-03")
    private LocalDate endDate;

    @Schema(description = "æ€»é¢„ç®—", example = "3000.00")
    private BigDecimal totalBudget;

    @Schema(description = "çŠ¶æ€", example = "PLANNING")
    private TripStatus status;

    @Schema(description = "æè¿°", example = "åŒ—äº¬ä¸‰æ—¥æ¸¸è®¡åˆ’")
    private String description;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;

    @Schema(description = "æ˜¯å¦ç§æœ‰", example = "false")
    private Boolean isPrivate;
}
```

## TripWithMemberInfoDto

```java
public class TripWithMemberInfoDto {
    @Schema(description = "æ—…ç¨‹ID")
    private UUID tripId;
    @Schema(description = "æ‰€æœ‰è€…ID")
    private UUID ownerId;
    @Schema(description = "æ ‡é¢˜", example = "åŒ—äº¬ä¸‰æ—¥æ¸¸")
    private String title;
    @Schema(description = "ç›®çš„åœ°åŸå¸‚", example = "åŒ—äº¬")
    private String destinationCity;
    @Schema(description = "å¼€å§‹æ—¥æœŸ", example = "2024-12-01")
    private LocalDate startDate;
    @Schema(description = "ç»“æŸæ—¥æœŸ", example = "2024-12-03")
    private LocalDate endDate;
    @Schema(description = "æ€»é¢„ç®—", example = "3000.00")
    private BigDecimal totalBudget;
    @Schema(description = "çŠ¶æ€", example = "IN_PROGRESS")
    private TripStatus status;
    @Schema(description = "æè¿°", example = "åŒ—äº¬ä¸‰æ—¥æ¸¸è®¡åˆ’")
    private String description;
    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;
    @Schema(description = "æ˜¯å¦ç§æœ‰", example = "false")
    private Boolean isPrivate;
    @Schema(description = "æˆå‘˜è§’è‰²", example = "OWNER")
    private MemberRole memberRole;
    @Schema(description = "æ˜¯å¦é€šè¿‡å®¡æ‰¹", example = "true")
    private Boolean isPass;
    @Schema(description = "åŠ å…¥æ—¶é—´")
    private OffsetDateTime joinedAt;
}
```

## EntireTrip

```java
public class EntireTrip {
    @Schema(description = "æ—…ç¨‹åŸºæœ¬ä¿¡æ¯", implementation = Trips.class)
    private Trips trip;
    
    @Schema(description = "æ—…ç¨‹æ—¥ç¨‹åˆ—è¡¨", implementation = EntireTripDay.class)
    private List<EntireTripDay> tripDays;
}
```

## EntireTripDay

```java
public class EntireTripDay{
    @Schema(description = "æ—¥ç¨‹åŸºæœ¬ä¿¡æ¯", implementation = TripDays.class)
    private TripDays tripDay;
    
    @Schema(description = "æ—¥ç¨‹é¡¹åˆ—è¡¨", implementation = EntireTripDayItem.class)
    private List<EntireTripDayItem> tripDayItems;
}
```

## TripDays

```java
public class TripDays implements Serializable {
    @Schema(description = "æ—¥ç¨‹ID")
    private UUID tripDayId;

    @Schema(description = "æ—…ç¨‹ID")
    private UUID tripId;

    @Schema(description = "æ—¥æœŸ", example = "2024-12-01")
    private LocalDate dayDate;

    @Schema(description = "å¤‡æ³¨", example = "ç¬¬ä¸€å¤©çš„è¡Œç¨‹å®‰æ’")
    private String notes;
}
```

## EntireTripDayItem

```java
public class EntireTripDayItem {
    @Schema(description = "æ—¥ç¨‹é¡¹åŸºæœ¬ä¿¡æ¯", implementation = TripDayItems.class)
    private TripDayItems item;
    
    @Schema(description = "å®ä½“ä¿¡æ¯", implementation = ItineraryItem.class)
    private ItineraryItem entity;
}
```

## TripDayItems

```java
public class TripDayItems implements Serializable {
    @Schema(description = "é¡¹ç›®ID")
    private UUID itemId;

    @Schema(description = "æ—¥ç¨‹ID")
    private UUID tripDayId;

    @Schema(description = "å®ä½“ID")
    private UUID entityId;

    @Schema(description = "å¼€å§‹æ—¶é—´", example = "09:00:00")
    private LocalTime startTime;

    @Schema(description = "ç»“æŸæ—¶é—´", example = "10:30:00")
    private LocalTime endTime;

    @Schema(description = "é¡¹ç›®é¡ºåº", example = "1.0")
    private Double itemOrder;

    @Schema(description = "äº¤é€šå»ºè®®", example = "æ­¥è¡Œ10åˆ†é’Ÿ")
    private String transportNotes;

    @Schema(description = "é¢„è®¡èŠ±è´¹", example = "50.00")
    private BigDecimal estimatedCost;

    @Schema(description = "æ˜¯å¦ä¸ºPOI", example = "true")
    private Boolean isPoi;

    @Schema(description = "å¤‡æ³¨", example = "éœ€è¦æå‰é¢„çº¦")
    private String notes;
}
```

## ItineraryItem (åŸºç±»)

```java
@Schema(description = "è¡Œç¨‹é¡¹ç›®åŸºç±»", subTypes = {Pois.class, NonPoiItem.class})
public class ItineraryItem {
}
```

## NonPoiItem

```java
public class NonPoiItem extends ItineraryItem implements Serializable {
    @Schema(description = "éPOIé¡¹ID")
    private UUID id;

    @Schema(description = "ç±»å‹", example = "ACTIVITY")
    private NonPoiType type;

    @Schema(description = "æ ‡é¢˜", example = "å…¨èšå¾·çƒ¤é¸­åº—")
    private String title;

    @Schema(description = "æè¿°", example = "æ­£å®—åŒ—äº¬çƒ¤é¸­")
    private String description;

    @Schema(description = "åŸå¸‚", example = "åŒ—äº¬")
    private String city;

    @Schema(description = "æ´»åŠ¨æ—¶é—´", example = "10:00-22:00")
    private String activityTime;

    @Schema(description = "é¢„è®¡åœ°å€", example = "åŒ—äº¬å¸‚ä¸œåŸåŒºå‰é—¨å¤§è¡—32å·")
    private String estimatedAddress;

    @Schema(description = "é¢å¤–ä¿¡æ¯", example = "äººå‡æ¶ˆè´¹200-300å…ƒ")
    private String extraInfo;

    @Schema(description = "æ¥æºURL", example = "https://example.com")
    private String sourceUrl;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;

    @Schema(description = "ç§æœ‰ç”¨æˆ·ID")
    private UUID privateUserId;
}
```

## TripExpenses

```java
public class TripExpenses implements Serializable {
    @Schema(description = "æ”¯å‡ºID")
    private UUID expenseId;

    @Schema(description = "ç”¨æˆ·ID")
    private UUID userId;

    @Schema(description = "æ—…ç¨‹ID")
    private UUID tripId;

    @Schema(description = "é‡‘é¢", example = "150.00")
    private BigDecimal amount;

    @Schema(description = "åˆ†ç±»", example = "ACCOMMODATION")
    private ExpenseType category;

    @Schema(description = "æè¿°", example = "é…’åº—ä½å®¿è´¹ç”¨")
    private String description;

    @Schema(description = "æ”¯å‡ºæ—¶é—´")
    private OffsetDateTime expenseTime;
}
```

## TripLogs

```java
public class TripLogs implements Serializable {
    @Schema(description = "æ—¥å¿—ID")
    private UUID logId;

    @Schema(description = "æ—…ç¨‹ID")
    private UUID tripId;

    @Schema(description = "æ—¥å¿—æ–‡æœ¬å†…å®¹")
    private String content;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;

    @Schema(description = "ç”¨æˆ·ID")
    private UUID userId;

    @Schema(description = "æ˜¯å¦å…¬å¼€")
    private Boolean isPublic;

    @Schema(description = "å›¾ç‰‡urlé›†åˆï¼Œå­˜å‚¨Listç»“åˆçš„jsonå­—ç¬¦ä¸²")
    private String imgs;
}
```

## TripLogsDto

```java
public class TripLogsDto extends TripLogs {

    @Schema(description = "ç”¨æˆ·å")
    private String username;

}
```



## TripMemberDto

```java
public class TripMemberDto extends TripMembers {
    @Schema(description = "ç”¨æˆ·å", example = "testuser")
    private String userName;
    
    @Schema(description = "åå¥½æ–‡æœ¬", example = "å–œæ¬¢å†å²æ–‡åŒ–å’Œç¾é£Ÿ")
    private String preferencesText;
}
```

## TripMembers

```java
public class TripMembers implements Serializable {
    @Schema(description = "æˆå‘˜ID")
    private UUID id;
    
    @Schema(description = "æ—…ç¨‹ID")
    private UUID tripId;

    @Schema(description = "ç”¨æˆ·ID")
    private UUID userId;

    @Schema(description = "æˆå‘˜è§’è‰²", example = "VIEWER")
    private MemberRole role;

    @Schema(description = "ç”³è¯·æ˜¯å¦å·²é€šè¿‡", example = "false")
    private Boolean isPass;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;
}
```

## TripMemberPendingRequestDto

```java
public class TripMemberPendingRequestDto {
    // æ—…ç¨‹id
    private UUID tripId;
    // æ—…ç¨‹æ ‡é¢˜
    private String title;
    // å¾…å¤„ç†è¯·æ±‚æ•°
    private Long pendingRequestCount;
}
```

## EntireWishlistItem

```java
public class EntireWishlistItem{
    @Schema(description = "å¿ƒæ„¿å•é¡¹åŸºæœ¬ä¿¡æ¯", implementation = WishlistItems.class)
    private WishlistItems item;
    
    @Schema(description = "å®ä½“ä¿¡æ¯", implementation = ItineraryItem.class)
    private ItineraryItem entity;
}
```

## WishlistItems

```java
public class WishlistItems implements Serializable {
    @Schema(description = "é¡¹ç›®ID")
    private UUID itemId;

    @Schema(description = "æ—…ç¨‹ID")
    private UUID tripId;

    @Schema(description = "å®ä½“ID")
    private UUID entityId;

    @Schema(description = "æ˜¯å¦ä¸ºPOI", example = "true")
    private Boolean isPoi;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;
}
```

## AiRecommendationConversation

```java
public class AiRecommendationConversation implements Serializable {
    @Schema(description = "ä¼šè¯ID")
    private UUID conversationId;

    @Schema(description = "ç”¨æˆ·ID")
    private UUID userId;

    @Schema(description = "æ ‡é¢˜", example = "åŒ—äº¬æ—…æ¸¸æ¨è")
    private String title;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;

    @Schema(description = "æ›´æ–°æ—¶é—´")
    private OffsetDateTime updatedAt;
}
```

## AiRecommendResponse

```java
public class AiRecommendResponse {
    @Schema(description = "AIçš„å›ç­”", example = "[\"æ‚¨å¥½ï¼Œæ¨èæ‚¨å»æ•…å®«åšç‰©é™¢å‚è§‚\", \"æ•…å®«æ˜¯ä¸­å›½å¤ä»£å®«æ®¿å»ºç­‘ç¾¤...\"]")
    private List<String> aiMessages;
    
    @Schema(description = "æœ¬æ¬¡ä½¿ç”¨çš„å·¥å…·åç§°", example = "[\"POI_SEARCH\", \"WEB_SEARCH\"]")
    private Set<String> toolUse;
    
    @Schema(description = "æœ¬æ¬¡å·¥å…·è°ƒç”¨ç»“æœ", example = "{\"POI_SEARCH\": [\"æ•…å®«åšç‰©é™¢\", \"å¤©å®‰é—¨å¹¿åœº\"], \"WEB_SEARCH\": [\"æ•…å®«å¼€æ”¾æ—¶é—´\"]}")
    private Map<String, List<String>> toolCallResults;
}
```

aiMessagesæ˜¯é›†åˆç±»å‹ï¼Œå¯èƒ½æœ‰å¤šæ¡æ¶ˆæ¯ï¼Œä½†éœ€è¦ä¸€å¹¶å±•ç¤ºï¼Œæ¶ˆæ¯çš„æ ¼å¼ç±»å‹æ˜¯markdownï¼Œéœ€è¦ä½¿ç”¨åˆé€‚çš„æ¸²æŸ“å™¨å¯¹markdownæ ¼å¼è¿›è¡Œæ¸²æŸ“ã€‚
å¦‚æœæœ¬æ¬¡å¯¹è¯aiä½¿ç”¨äº†å·¥å…·ï¼ŒtoolCallResultsä¸ä¸ºç©ºï¼Œåˆ™åº”è¯¥ç”¨å¤šä¸ªå¯å±•å¼€çš„åˆ—è¡¨å±•ç¤ºæ¯ä¸ªå·¥å…·çš„è°ƒç”¨ç»“æœã€‚åˆ—è¡¨é»˜è®¤è®¾ç½®ä¸ºæŠ˜å çŠ¶æ€ã€‚

## WebPage

```java
public class WebPage implements Serializable {
    @Schema(description = "ç½‘é¡µID")
    private UUID id;

    @Schema(description = "ä¼šè¯ID")
    private UUID conversationId;

    @Schema(description = "ç½‘é¡µæ ‡é¢˜")
    private String name;

    @Schema(description = "ç½‘é¡µURL", example = "https://www.dpm.org.cn")
    private String url;

    @Schema(description = "å±•ç¤ºURLï¼Œurl decodeåçš„æ ¼å¼", example = "www.dpm.org.cn")
    private String displayUrl;

    @Schema(description = "ç½‘é¡µç®€çŸ­æè¿°", example = "æ•…å®«åšç‰©é™¢å®˜æ–¹ç½‘ç«™...")
    private String snippet;

    @Schema(description = "ç½‘é¡µæ€»ç»“ã€æ–‡æœ¬æ‘˜è¦", example = "è¯¦ç»†ä»‹ç»æ•…å®«çš„å†å²å’Œæ–‡åŒ–...")
    private String summary;
    
    @Schema(description = "ç½‘ç«™åç§°", example = "ç™¾åº¦")
    private String siteName;

    @Schema(description = "å‘å¸ƒæ—¥æœŸ")
    private OffsetDateTime datePublished;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private OffsetDateTime createdAt;
}
```

## ExtractResult

```java
class ExtractResult {
    String message;
    UUID webPageId;
    String webPageTitle;
    List<Pois> pois;
    List<NonPoiItem> nonPois;
}
```

## TripStatus

```java
public enum TripStatus {
    @EnumValue
    PLANNING,
    @EnumValue
    IN_PROGRESS,
    @EnumValue
    COMPLETED,
    @EnumValue
    CANCELLED
}
```

## NonPoiType

```java
public enum NonPoiType {
    @EnumValue
    ACTIVITY,
    @EnumValue
    FOOD,
    @EnumValue
    CULTURE,
    @EnumValue
    OTHER
}
```

## MemberRole

```java
public enum MemberRole {
    @EnumValue
    OWNER(3),
    @EnumValue
    EDITOR(2),
    @EnumValue
    VIEWER(1);
    private final int level;
}
```

## ExpenseType

```java
public enum ExpenseType {

    @EnumValue
    TRANSPORTATION("äº¤é€š"),
    @EnumValue
    ACCOMMODATION("ä½å®¿"),
    @EnumValue
    DINING("é¤é¥®"),
    @EnumValue
    SIGHTSEEING("æ¸¸ç©"),
    @EnumValue
    SHOPPING("è´­ç‰©"),
    @EnumValue
    OTHER("å…¶ä»–");

    private final String zhName;

}
```

## Message

```json
	{
      "messageType": "USER",
      "metadata": {
        "messageType": "USER"
      },
      "media": [],
      "text": "ä½ å¥½ï¼Œä½ æ˜¯è°å•Š"
    },
    {
      "messageType": "ASSISTANT",
      "metadata": {
        "messageType": "ASSISTANT"
      },
      "toolCalls": [],
      "media": [],
      "text": "\nä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIæ—…æ¸¸åŠ©æ‰‹ï¼Œæˆ‘å¯ä»¥å¸®åŠ©ä½ ï¼š\n\n- ğŸ—ºï¸ **åœ°ç‚¹æŸ¥è¯¢** - æœç´¢æ™¯ç‚¹ã€é¤å…ã€é…’åº—ç­‰ä½ç½®ä¿¡æ¯\n- ğŸš— **è·¯çº¿è§„åˆ’** - æä¾›é©¾è½¦ã€å…¬äº¤ã€åœ°é“ã€æ­¥è¡Œã€éª‘è¡Œç­‰å¤šç§å‡ºè¡Œæ–¹æ¡ˆ\n- ğŸŒ¤ï¸ **å¤©æ°”æŸ¥è¯¢** - è·å–å„åŸå¸‚å¤©æ°”ä¿¡æ¯\n- ğŸ” **å‘¨è¾¹æœç´¢** - æŸ¥æ‰¾æŒ‡å®šä½ç½®é™„è¿‘çš„è®¾æ–½å’ŒæœåŠ¡\n- ğŸ“ **è¡Œç¨‹è§„åˆ’** - å¸®åŠ©ä½ è§„åˆ’å®Œæ•´çš„æ—…è¡Œè·¯çº¿\n\næˆ‘å¯ä»¥ä¸ºä½ æä¾›ç²¾å‡†çš„æ—…æ¸¸ä¿¡æ¯å’Œä¸ªæ€§åŒ–å»ºè®®ï¼Œæ— è®ºæ˜¯æ‰¾çµæ„Ÿè¿˜æ˜¯æŸ¥å…·ä½“ä¿¡æ¯éƒ½å¾ˆæ“…é•¿ï¼æœ‰ä»€ä¹ˆæ—…æ¸¸æ–¹é¢çš„é—®é¢˜éœ€è¦å¸®åŠ©å—ï¼Ÿ"
    }
```

